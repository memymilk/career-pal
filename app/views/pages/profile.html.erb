<div class="profile-container mt-5">
  <div class="dashboard-head">
    <div><%= render "shared/userinfo" %></div>
    <div><%= render "shared/readiness_card" %></div>
  </div>

    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Dashboard</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">History</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">Profile</button>
      </li>

  </ul>
  <div class="tab-content" id="myTabContent">

    <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">

       <!-- Tab1: dashboard //-->
      <div class="space-between">
        <div><h3 class="mt-5 ms-3 mb-3"><%= image_tag "stats.svg", class:"me-2" %> Your stats on average</h3></div>
        <div style="display:flex" class="me-3"><h3 class="mt-5 ms-3">Total calls: <%= @my_array.length %> </h3>  <%= image_tag "calls.svg", class:"call-image me-3 ms-3" %></div>
      </div>
      <div class="card mb-5">
        <div class="card-text p-4">

           <%= render "feedbacks/average_dashboard" %>


          <!-- chart building below //-->
          <div style="width: 800px;"><canvas id="acquisitions"></canvas></div>

          <script type="module" src="acquisitions.js"></script>
          <!-- chart building end //-->


        </div>
      </div>

      <!-- end of Tab1: dashboard //-->

    </div>

    <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">

     <!-- Tab2: history //-->
     <% if @feedback_number != 0 %>
      <h4 class="mt-5 ms-3">You have nailed <%= @my_array.length %> interviews so far, way to go!</h4>
      <% else %>
      <h4 class="mt-5 ms-3">Time to start practicing, make your mum proud!</h4>
      <% end %>
      <br>
      <!-- looped card creation //-->
      <%= render "feedbacks/feedback_history_card" %>
      <!-- looped card creation end //-->
      <!-- end of Tab2: history //-->

    </div>

    <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">

     <!-- Tab3: profile//-->
      <div class="profile-tite-edit">
        <div>
          <h3 class="mt-5 ms-3 mb-3"><%= image_tag "work.svg", class:"me-2" %> My work experience</h3></div>
          <% frame_id = dom_id(current_user, "work_experience") %>
          <%= turbo_frame_tag "edit_work_experience" do %>
            <div class="mb-3 mt-5 me-3 space-between flex-end"><%= render "shared/edit", path: edit_profile_work_experience_path, turbo_frame: frame_id %></div>
          <% end %>
        </div>
        <div class="card mb-5">
          <div class="card-text p-4 pb-1">

          <!-- rb work start, change to current in production //-->
          <%= turbo_frame_tag frame_id do %>
          <p><%= current_user.work_experience %></p>
          <% end %>
          <!-- <p><%= User.first.work_experience %></p> //-->

          <!-- rb work end //-->

          </div>
        </div>

       <div class="profile-tite-edit">
        <div>
          <h3 class="ms-3 mb-3"><%= image_tag "education.svg", class:"me-2" %> My education</h3></div>
          <% frame_id = dom_id(current_user, "education") %>
          <%= turbo_frame_tag "edit_education" do %>
            <div class="mb-3 me-3 space-between flex-end"><%= render "shared/edit", path: edit_profile_education_path, turbo_frame: frame_id %></div>
          <% end %>
        </div>

        <div class="card mb-5">
          <div class="card-text p-4 pb-1">

          <!-- rb education start //-->
          <%= turbo_frame_tag frame_id do %>
          <p> <%= current_user.education %> </p>
          <% end %>
          <!-- rb education end //-->

          </div>
        </div>

        <div class="profile-tite-edit">
        <div>
          <h3 class="ms-3 mb-3"><%= image_tag "info.svg", class:"me-2" %> Other info</h3></div>
          <% frame_id = dom_id(current_user, "extra_info") %>
          <%= turbo_frame_tag "edit_extra_info" do %>
          <div class="mb-3 me-3 space-between flex-end"><%= render "shared/edit", path: edit_profile_extra_info_path, turbo_frame: frame_id %></div>
          <% end %>
        </div>
        <div class="card mb-5">
          <div class="card-text p-4 pb-1">

          <!-- rb education start //-->
          <%= turbo_frame_tag frame_id do %>
          <p><%= current_user.extra_info %></p>
          <% end %>
          <!-- rb education end //-->

          </div>
        </div>
      <!-- end of Tab3: profile//-->

    </div>
  </div>
</div>
